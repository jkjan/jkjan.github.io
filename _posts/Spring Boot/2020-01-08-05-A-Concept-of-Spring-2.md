---
title : A Concept of Spring 2
date : 2020-01-08
categories : [Spring]
---

## 의존성

Spring 에 대해서 이것저것 찾다 보면  
의존성이라는 단어가 나온다.  
의존성이란, 두 클래스의 참조가 긴밀하게 붙어있는지를 나타낸다.  
코딩이란 알다시피 하나만 틀어져도 에러가 터진다.  
이때 의존성이 높으면 당연히 한 쪽에서 참조하는 걸 조금만 바꿔도  
다른 쪽에선 에러가 날 것이다.  

예를 들어서  

```kotlin
class A (val b : B) {
  b.doSomething()
}

class B() {
  ...
}
```

위 코드는 의존성이 장난이 아니다.  
A 라는 클래스는 B 클래스를 참조하다 못해 생성자로 갖고 있다.  
여기서는 B 클래스를 조금만 수정하면 A 쪽에서 터져버리고 말 것이다.  

그렇다면 이것은 어떨까  

```kotlin
class A () {
  var b : B? = null
  ...
}

...

val a = A()
a.b = B()
```

이렇다면 약간 숨통은 트일 것이다.  
위 코드와의 차이는, 위는 B를 생성자로 해서 A에다가 고정을 시켜놨지만  
아래는 setter 를 통해 수정 가능하도록 했다.  

B를 수정했을 때 에러가 터지는 건 마찬가지겠지만 그래도 의존성이 낮아졌다고 할 수 있다.  

이를 통해서 알 수 있는 점은, 클래스가 어떤 다른 클래스를 필요로 할 때 (참조),  
바로 가져다가 쓰면 의존성이 강해지고, 이렇게 되면   
나중에 그 클래스와 모듈을 수정할 때 굉장히 어렵고 복잡할 것이다.  

**따라서 서로 참조하듯 안 하듯 하게 짜놓고  
이에 대한 참조를 다른 누군가가 대신 한다면 어떨까?**  

코드를 각각 짜고나서, 두 클래스가 어떻게 서로 참조가 되는지만 써놓고  
실행할 때 이 둘의 의존 관계를 유동적으로 바꿀 수 있는 일종의 룰만 정의해놓으면  
개발자는 B 를 개발하면서 A 쪽에서 터질 걱정 없이 코드를 짤 수 있을 것이다.  

*그리고 이를 Dependency Injection, 의존성 주입이라고 한다.*

프로그램은 일종의 클래스와 모듈이 조립돼서 같이 움직이는 기계라고 할 수 있다.  
우리는 이걸 다 조립시켜놓고 나중에 수정하거나 하면 그 부품과 연결된 다른 부품 쪽이랑 뭐가 안 맞을 수도 있으니  
수정할 때는 부품들 다 떼어놓고 수정하고 조립 설명서 하나만 던져두고  
프로그램한테 그거 보고 스스로 조립하라고 하는 것이다.  

여기서 이 조립 설명서가 의존성 주입에 해당한다.  
